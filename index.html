<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrated Performance Program</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Calm Harmony (Slate Gray, White, Teal) -->
    <!-- Application Structure Plan: A task-oriented SPA with a main navigation bar switching between distinct views: 1) A 'Dashboard' showing the user's workout for the current day. 2) A 'Full Program' explorer with interactive phase selectors. 3) A 'Principles' section with accordions explaining core concepts like Progressive Overload and TUT. 4) A 'Cardio & Protocols' view combining cardio info (with a visual chart) and warm-up/cool-down routines. 5) A 'Progress' view with a calendar to track completed workouts. This structure was chosen to prioritize immediate usability ('What do I do today?') while allowing for non-linear exploration of the program's details and adding a motivational tracking feature. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Weekly Schedule -> Goal: Guide User Daily -> Viz: Dynamic 'Today's Workout' Card with 'Mark Complete' button -> Interaction: JS determines day of week, displays plan, and allows user to save completion to localStorage -> Justification: Provides immediate, actionable information and motivational feedback.
        - Report Info: Completed Workouts -> Goal: Track Consistency -> Viz: Interactive Calendar -> Interaction: User can navigate months. JS reads from localStorage to display checkmarks on completed days. -> Justification: Provides a long-term visual record of adherence.
        - Report Info: 12-Week Phased Program Tables -> Goal: Organize/Explore -> Viz: Tabbed/Button Interface for Phases & Grid of Workout Cards -> Interaction: User clicks a phase button (1, 2, or 3) and JS dynamically populates the view with the corresponding workouts. -> Justification: Breaks down a large amount of complex information into manageable, user-selected chunks.
        - Report Info: Heart Rate Zones for LISS/HIIT -> Goal: Compare/Inform -> Viz: Bar Chart (Chart.js) -> Interaction: Visually displays Target vs. Max Heart Rate for each cardio type. -> Justification: A chart is more intuitive and impactful for comparing quantitative data than a text description alone.
        - Report Info: Foundational Principles (TUT, Overload) -> Goal: Inform/Explain -> Viz: Accordion-style expandable sections -> Interaction: User clicks a title to reveal detailed text. -> Justification: Keeps the UI clean and prevents overwhelming the user with large blocks of text upon first view.
        -> Library/Method: Vanilla JS for all state management and DOM manipulation. Chart.js for the cardio visualization. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        .view { display: none; }
        .view.active { display: block; }
        .nav-btn { transition: all 0.3s ease; }
        .nav-btn.active {
            background-color: #0d9488; /* teal-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .phase-btn.active {
            background-color: #14b8a6; /* teal-500 */
            color: white;
            font-weight: 600;
        }
        .table-cell {
            padding: 0.75rem;
            vertical-align: top;
            border-bottom: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="app" class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900">Integrated Performance Program</h1>
            <p class="text-slate-600 mt-2 text-lg">Your 12-Week Protocol for Strength, Posture, and Conditioning</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8 sticky top-4 bg-slate-50/80 backdrop-blur-sm py-2 z-10">
            <button data-view="dashboard" class="nav-btn active text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Today's Workout</button>
            <button data-view="program" class="nav-btn text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Full Program</button>
            <button data-view="principles" class="nav-btn text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Core Principles</button>
            <button data-view="cardio" class="nav-btn text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Cardio & Protocols</button>
            <button data-view="progress" class="nav-btn text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Progress</button>
        </nav>

        <main>
            <!-- Dashboard View -->
            <div id="dashboard" class="view active">
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Dashboard</h2>
                    <p class="text-slate-600 mb-6">Welcome to your performance dashboard. This view automatically displays the scheduled activity for today, providing immediate focus for your training. Whether it's a specific strength workout, a cardio session, or a much-needed rest day, your plan is laid out here to get you started without delay.</p>
                    <div id="today-workout-container" class="bg-slate-50 p-6 rounded-lg border border-slate-200"></div>
                </div>
            </div>

            <!-- Full Program View -->
            <div id="program" class="view">
                 <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">The 12-Week Plan</h2>
                    <p class="text-slate-600 mb-6">Explore the entire 12-week periodized program here. The plan is divided into three distinct 4-week phases, each with a unique focus to prevent plateaus and drive continuous progress. Select a phase below to view the detailed strength workouts (A, B, and C) for that block. This allows you to understand the progression from hypertrophy and tempo mastery, through strength intensification, to final performance and metabolic conditioning.</p>
                    <div class="flex justify-center gap-2 mb-6">
                        <button data-phase="1" class="phase-btn py-2 px-5 rounded-md bg-slate-200 hover:bg-teal-400 hover:text-white transition">Phase 1</button>
                        <button data-phase="2" class="phase-btn py-2 px-5 rounded-md bg-slate-200 hover:bg-teal-400 hover:text-white transition">Phase 2</button>
                        <button data-phase="3" class="phase-btn py-2 px-5 rounded-md bg-slate-200 hover:bg-teal-400 hover:text-white transition">Phase 3</button>
                    </div>
                    <div id="phase-details" class="grid grid-cols-1 lg:grid-cols-3 gap-6"></div>
                </div>
            </div>

            <!-- Principles View -->
            <div id="principles" class="view">
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Core Training Principles</h2>
                     <p class="text-slate-600 mb-6">Understanding the 'why' behind your training is crucial for long-term success. This section breaks down the foundational scientific principles that this program is built upon. Interacting with these concepts—from the mechanics of muscle growth to the specifics of postural correction—will empower you to train with greater intent and effectiveness. Click each principle to learn more.</p>
                    <div id="principles-container" class="space-y-4"></div>
                </div>
            </div>

            <!-- Cardio & Protocols View -->
            <div id="cardio" class="view">
                 <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Cardio & Protocols</h2>
                    <p class="text-slate-600 mb-6">Effective training is about more than just lifting. This section details the complete supportive structure of your program: cardiovascular conditioning, dynamic warm-ups, and post-workout cool-downs. Here you can compare the different cardio styles used in the program, understand their unique benefits via the chart, and access the specific warm-up and stretching routines that are essential for performance and injury prevention.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold mb-4">Cardiovascular Conditioning</h3>
                            <div id="cardio-container" class="space-y-6"></div>
                             <div class="mt-8">
                                <h3 class="text-xl font-bold mb-4">Target Heart Rate Zones (34 y/o Male)</h3>
                                <div class="chart-container relative h-72 w-full max-w-md mx-auto">
                                    <canvas id="cardioChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold mb-4">Mobility & Recovery Protocols</h3>
                            <div id="protocols-container" class="space-y-6"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress View -->
            <div id="progress" class="view">
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Your Progress Calendar</h2>
                    <p class="text-slate-600 mb-6">This calendar tracks your completed workouts. A checkmark indicates a day you've successfully logged a session. Stay consistent!</p>
                    <div id="calendar-container"></div>
                </div>
            </div>
        </main>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const appData = {
                workouts: {
                    phase1: {
                        name: 'Phase 1: Hypertrophy & Tempo Mastery (Wks 1-4)',
                        workouts: {
                            A: {
                                name: 'Workout A (Horizontal Push/Pull)',
                                plan: [
                                    { ex: 'Barbell Bench Press', sets: '3', reps: '8-10', tempo: '3-1-1-0', rest: '90s' },
                                    { ex: 'Barbell Bent-Over Row', sets: '4', reps: '8-10', tempo: '3-1-1-0', rest: '90s' },
                                    { ex: 'Dumbbell Incline Press', sets: '3', reps: '10-12', tempo: '3-1-1-0', rest: '60s' },
                                    { ex: 'Seated Cable Row', sets: '3', reps: '12-15', tempo: '3-1-1-0', rest: '60s' },
                                    { ex: 'Face Pulls', sets: '3', reps: '15-20', tempo: '2-1-1-1', rest: '45s' },
                                ]
                            },
                            B: {
                                name: 'Workout B (Squat/Hinge)',
                                plan: [
                                    { ex: 'Barbell Back Squat', sets: '3', reps: '8-10', tempo: 'Controlled', rest: '120s' },
                                    { ex: 'Romanian Deadlift', sets: '3', reps: '10-12', tempo: '3-1-1-0', rest: '90s' },
                                    { ex: 'Bulgarian Split Squat', sets: '3', reps: '10-12/leg', tempo: '3-1-1-0', rest: '60s' },
                                    { ex: 'Lying Hamstring Curl', sets: '3', reps: '12-15', tempo: '3-1-1-0', rest: '60s' },
                                    { ex: 'Plank', sets: '3', reps: '45-60s hold', tempo: 'N/A', rest: '45s' },
                                ]
                            },
                            C: {
                                name: 'Workout C (Vertical Push/Pull)',
                                plan: [
                                    { ex: 'Overhead Press (Barbell)', sets: '3', reps: '8-10', tempo: '3-1-1-0', rest: '90s' },
                                    { ex: 'Pull-ups (or Lat Pulldowns)', sets: '4', reps: '8-10', tempo: '3-1-1-0', rest: '90s' },
                                    { ex: 'Seated Dumbbell Shoulder Press', sets: '3', reps: '10-12', tempo: '3-1-1-0', rest: '60s' },
                                    { ex: 'Single-Arm Dumbbell Row', sets: '3', reps: '10-12/arm', tempo: '3-1-1-0', rest: '60s' },
                                    { ex: 'Pallof Press', sets: '3', reps: '12-15/side', tempo: '3-1-1-0', rest: '45s' },
                                ]
                            }
                        }
                    },
                    phase2: {
                        name: 'Phase 2: Strength Intensification (Wks 5-8)',
                        workouts: {
                            A: {
                                name: 'Workout A (Horizontal Push/Pull)',
                                plan: [
                                    { ex: 'Barbell Bench Press', sets: '4', reps: '5-8', tempo: 'Controlled', rest: '120-150s' },
                                    { ex: 'Barbell Bent-Over Row', sets: '4', reps: '5-8', tempo: 'Controlled', rest: '120s' },
                                    { ex: 'Weighted Dips (or CGBP)', sets: '3', reps: '6-10', tempo: '3-1-1-0', rest: '90s' },
                                    { ex: 'T-Bar Row', sets: '3', reps: '8-10', tempo: '3-1-1-0', rest: '90s' },
                                    { ex: 'Renegade Row', sets: '3', reps: '8-10/side', tempo: 'Controlled', rest: '60s' },
                                ]
                            },
                            B: {
                                name: 'Workout B (Squat/Hinge)',
                                plan: [
                                    { ex: 'Barbell Back Squat', sets: '4', reps: '5-8', tempo: 'Controlled', rest: '120-150s' },
                                    { ex: 'Deadlift (Conventional)', sets: '3', reps: '5', tempo: 'Controlled', rest: '150-180s' },
                                    { ex: 'Pause Squat', sets: '3', reps: '5', tempo: '2-2-X-0', rest: '120s' },
                                    { ex: 'Glute-Ham Raise (or Hip Thrusts)', sets: '3', reps: '8-12', tempo: '2-1-1-1', rest: '90s' },
                                    { ex: 'Hanging Leg Raise', sets: '3', reps: 'To Failure', tempo: 'N/A', rest: '60s' },
                                ]
                            },
                            C: {
                                name: 'Workout C (Vertical Push/Pull)',
                                plan: [
                                    { ex: 'Overhead Press (Barbell)', sets: '4', reps: '5-8', tempo: 'Controlled', rest: '120s' },
                                    { ex: 'Weighted Pull-ups (or Pulldowns)', sets: '4', reps: '5-8', tempo: 'Controlled', rest: '120s' },
                                    { ex: 'Landmine Press', sets: '3', reps: '8-10/arm', tempo: '3-1-1-0', rest: '60s' },
                                    { ex: 'Face Pulls', sets: '4', reps: '12-15', tempo: '2-1-1-1', rest: '60s' },
                                    { ex: 'Side Plank', sets: '3', reps: '45-60s/side', tempo: 'N/A', rest: '45s' },
                                ]
                            }
                        }
                    },
                    phase3: {
                        name: 'Phase 3: Performance & Metabolic Conditioning (Wks 9-12)',
                        workouts: {
                           A: {
                                name: 'Workout A',
                                plan: [
                                    { type: 'superset', exercises: [ {ex: 'A1: Dumbbell Incline Press', sets: '4', reps: '8-12' }, { ex: 'A2: Chest-Supported Row', sets: '4', reps: '10-15' }], rest: '60-75s after A2'},
                                    { type: 'superset', exercises: [ {ex: 'B1: Flat Dumbbell Fly', sets: '3', reps: '12-15' }, { ex: 'B2: Face Pulls', sets: '3', reps: '15-20' }], rest: '60s after B2'},
                                    { type: 'finisher', ex: 'Cable Crunch', sets: '4', reps: '15-20', rest: '45s' }
                                ]
                            },
                            B: {
                                name: 'Workout B',
                                plan: [
                                    { type: 'superset', exercises: [ {ex: 'A1: Goblet Squat', sets: '4', reps: '10-15' }, { ex: 'A2: Kettlebell Swing', sets: '4', reps: '15-20' }], rest: '60-75s after A2'},
                                    { type: 'superset', exercises: [ {ex: 'B1: Walking Lunge', sets: '3', reps: '12-15/leg' }, { ex: 'B2: Lying Leg Curl', sets: '3', reps: '12-15' }], rest: '60s after B2'},
                                    { type: 'finisher', ex: 'Ab Rollout', sets: '4', reps: 'To Near Failure', rest: '45s' }
                                ]
                            },
                            C: {
                                name: 'Workout C',
                                plan: [
                                    { type: 'superset', exercises: [ {ex: 'A1: Seated Dumbbell Shoulder Press', sets: '4', reps: '10-12' }, { ex: 'A2: Lat Pulldown', sets: '4', reps: '10-12' }], rest: '60-75s after A2'},
                                    { type: 'superset', exercises: [ {ex: 'B1: Dumbbell Lateral Raise', sets: '3', reps: '12-15' }, { ex: 'B2: Straight Arm Pulldown', sets: '3', reps: '12-15' }], rest: '60s after B2'},
                                    { type: 'finisher', ex: 'Russian Twist', sets: '4', reps: '15-20/side', rest: '45s' }
                                ]
                            }
                        }
                    },
                    cardioLISS: {
                        name: 'Cardio Day (LISS)',
                        type: 'LISS (Low-Intensity Steady-State)',
                        goal: 'Active Recovery, Aerobic Base Building',
                        duration: '30-45 minutes',
                        intensity: 'Zone 2: ~60-70% of Max HR (112-130 BPM)',
                        protocols: [
                            'Treadmill: Walk at 3.0-3.5 mph on a 5-10% incline.',
                            'Bike/Rower: Cycle/Row at a steady, manageable pace.'
                        ]
                    },
                    cardioHIIT: {
                        name: 'Cardio Day (HIIT)',
                        type: 'HIIT (High-Intensity Interval Training)',
                        goal: 'Maximize Caloric Expenditure, Boost Metabolism',
                        duration: '15-20 minutes',
                        intensity: 'Work: ~85-95% Max HR (158-177 BPM)',
                        protocols: [
                            'Treadmill: 5 min warm-up. Then 10 rounds of: 30s sprint / 60s walk. 5 min cool-down.',
                            'Bike/Rower: 5 min warm-up. Then 8 rounds of: 40s max effort / 80s easy pace. 5 min cool-down.'
                        ]
                    },
                    rest: {
                        name: 'Rest & Recovery Day',
                        goal: 'Allow nervous system and tissues to recover and supercompensate. Crucial for long-term progress.'
                    }
                },
                weeklySchedule: [
                    'rest', // Sunday
                    'phase.A', // Monday
                    'cardioLISS', // Tuesday
                    'phase.B', // Wednesday
                    'cardioLISS', // Thursday
                    'phase.C', // Friday
                    'cardioHIIT' // Saturday
                ],
                principles: [
                    { title: 'Progressive Overload', content: 'The principle of gradually increasing the stress placed upon the body over time. This is the single most critical factor for continuous gains. We achieve this by increasing weight, reps/sets (volume), decreasing rest time (density), or using more complex exercises. Diligent tracking is key to ensure consistent, deliberate progress.' },
                    { title: 'Time Under Tension (TUT)', content: 'Refers to the total duration a muscle is under stress during a set. Maximizing TUT amplifies both mechanical tension and metabolic stress, the primary drivers of muscle growth. We control this with a specific lifting tempo (e.g., 3-1-1-0), focusing on a slow, controlled lowering phase to enhance the stimulus, especially for upper body and core movements.'},
                    { title: 'Postural Correction (2:1 Pull/Push Ratio)', content: 'To counteract the effects of a sedentary job (rounded shoulders, forward head), this program is intentionally biased towards strengthening the upper back. We program a 2:1 ratio of pulling volume to pushing volume. For every set of a pressing exercise, you will perform two sets of a pulling exercise, systematically strengthening the muscles that pull your shoulders back and promote an upright posture.'},
                    { title: 'Periodization', content: 'The logical structuring of training into distinct phases, each with a specific focus (e.g., muscle growth, maximal strength, metabolic conditioning). This manipulation of training variables is a proven strategy to manage recovery, prevent plateaus, and optimize long-term progress by providing a novel stimulus in each phase.'}
                ],
                cardioInfo: [
                    { title: 'LISS (Low-Intensity Steady-State)', content: 'Performed at a moderate, consistent heart rate for 30-45 minutes. LISS is excellent for building an aerobic base and aids recovery by promoting blood flow without adding significant stress. It is programmed as "active recovery" the day after strength training.' },
                    { title: 'HIIT (High-Intensity Interval Training)', content: 'Involves short, all-out bursts of exercise followed by brief recovery. HIIT is time-efficient and creates a significant "afterburn" effect (EPOC), elevating metabolism for hours. Due to its high nervous system demand, it is scheduled before a full rest day.'}
                ],
                protocols: [
                    { 
                        title: 'Dynamic Warm-Up (10 min)', 
                        content: 'Perform before every strength workout to raise core temperature, improve mobility, and activate key muscles.',
                        steps: [
                            '<strong>General (3 min):</strong> 60s Jumping Jacks, 60s High Knees, 60s Butt Kicks.',
                            '<strong>Mobility (4 min):</strong> 10 Cat-Cow, 10 Hip Circles/leg, 10 Arm Circles/arm, 8 Inchworms.',
                            '<strong>Activation (3 min, 2 rounds):</strong> 15 Glute Bridges, 15 Banded Pull-Aparts, 10 Bird-Dog/side.'
                        ]
                    },
                    {
                        title: 'Postural Cool-Down (10 min)',
                        content: 'Perform after workouts or on rest days to release tension in chronically tight muscles.',
                        steps: [
                            'Doorway Chest Stretch: 2 sets of 30-45s/side.',
                            'Kneeling Hip Flexor Stretch: 2 sets of 30-45s/side.',
                            'Standing Hamstring Stretch: 2 sets of 30-45s/side.',
                            'Seated Figure-Four Stretch: 2 sets of 30-45s/side.',
                            'Upper Trap/Neck Stretch: 2 sets of 30s/side.',
                            'Child\'s Pose: Hold for 60s.'
                        ]
                    }
                ]
            };
            
            let currentView = 'dashboard';
            let currentPhase = 1;
            let calendarDate = new Date();

            const views = {
                dashboard: document.getElementById('dashboard'),
                program: document.getElementById('program'),
                principles: document.getElementById('principles'),
                cardio: document.getElementById('cardio'),
                progress: document.getElementById('progress')
            };

            const navButtons = document.querySelectorAll('.nav-btn');
            const phaseButtons = document.querySelectorAll('.phase-btn');

            function switchView(viewName) {
                currentView = viewName;
                navButtons.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.view === viewName);
                });
                Object.values(views).forEach(view => {
                    view.classList.toggle('active', view.id === viewName);
                });
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            navButtons.forEach(btn => {
                btn.addEventListener('click', () => switchView(btn.dataset.view));
            });

            phaseButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    currentPhase = parseInt(btn.dataset.phase);
                    renderPhaseWorkouts();
                    phaseButtons.forEach(pb => pb.classList.toggle('active', parseInt(pb.dataset.phase) === currentPhase));
                });
            });

            function createWorkoutTableHTML(workout, isPhase3 = false) {
                 if (isPhase3) {
                    let supersetHtml = workout.plan.map(item => {
                        if (item.type === 'superset') {
                            return `
                                <div class="mb-4">
                                    <div class="font-semibold text-teal-700">Superset: ${item.exercises[0].sets} sets</div>
                                    <ul class="list-disc list-inside ml-4 text-slate-700">
                                        <li>${item.exercises[0].ex} (${item.exercises[0].reps} reps)</li>
                                        <li>${item.exercises[1].ex} (${item.exercises[1].reps} reps)</li>
                                    </ul>
                                    <div class="text-sm text-slate-500 ml-4">Rest: ${item.rest}</div>
                                </div>`;
                        }
                        return `
                            <div>
                                <div class="font-semibold text-teal-700">Core Finisher: ${item.sets} sets</div>
                                 <ul class="list-disc list-inside ml-4 text-slate-700">
                                    <li>${item.ex} (${item.reps} reps)</li>
                                </ul>
                                <div class="text-sm text-slate-500 ml-4">Rest: ${item.rest}</div>
                            </div>`;
                    }).join('');
                    return `<div class="bg-slate-50 p-4 rounded-lg border border-slate-200">${supersetHtml}</div>`;
                }

                let rows = workout.plan.map(ex => `
                    <tr>
                        <td class="table-cell font-medium">${ex.ex}</td>
                        <td class="table-cell text-center">${ex.sets}</td>
                        <td class="table-cell text-center">${ex.reps}</td>
                        <td class="table-cell text-center">${ex.rest}</td>
                    </tr>
                `).join('');
                return `
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-slate-100 text-slate-600 uppercase text-xs">
                                <tr>
                                    <th class="table-cell">Exercise</th>
                                    <th class="table-cell text-center">Sets</th>
                                    <th class="table-cell text-center">Reps</th>
                                    <th class="table-cell text-center">Rest</th>
                                </tr>
                            </thead>
                            <tbody>${rows}</tbody>
                        </table>
                    </div>
                `;
            }

            function createWorkoutCardHTML(workout, isPhase3 = false) {
                return `
                    <div class="bg-white p-4 rounded-lg shadow-md border border-slate-200 h-full">
                        <h4 class="font-bold text-lg mb-3 text-slate-800">${workout.name}</h4>
                        ${createWorkoutTableHTML(workout, isPhase3)}
                    </div>
                `;
            }

            function renderPhaseWorkouts() {
                const phaseKey = `phase${currentPhase}`;
                const phaseData = appData.workouts[phaseKey];
                const container = document.getElementById('phase-details');
                container.innerHTML = `
                    <h3 class="text-xl font-bold text-slate-700 mb-4 lg:col-span-3">${phaseData.name}</h3>
                    ${createWorkoutCardHTML(phaseData.workouts.A, currentPhase === 3)}
                    ${createWorkoutCardHTML(phaseData.workouts.B, currentPhase === 3)}
                    ${createWorkoutCardHTML(phaseData.workouts.C, currentPhase === 3)}
                `;
            }
            
            function renderTodayWorkout() {
                const today = new Date();
                const workoutKey = appData.weeklySchedule[today.getDay()];
                const container = document.getElementById('today-workout-container');

                let workoutData;
                let workoutHtml = '';

                if (workoutKey.startsWith('phase.')) {
                    const day = workoutKey.split('.')[1];
                    workoutData = appData.workouts.phase1.workouts[day];
                    workoutHtml = `
                        <h3 class="font-bold text-xl mb-1">Today's Plan: Strength Workout ${day}</h3>
                        <p class="text-slate-600 mb-4">${workoutData.name} (from Phase 1)</p>
                        ${createWorkoutTableHTML(workoutData)}
                    `;
                } else {
                    workoutData = appData.workouts[workoutKey];
                    if (workoutKey === 'rest') {
                        workoutHtml = `
                            <h3 class="font-bold text-xl mb-1">${workoutData.name}</h3>
                            <p class="text-slate-600">${workoutData.goal}</p>
                        `;
                    } else { // Cardio
                         workoutHtml = `
                            <h3 class="font-bold text-xl mb-1">${workoutData.name}</h3>
                            <p class="text-sm text-slate-500 mb-2">${workoutData.type}</p>
                            <p class="mb-4"><strong class="font-semibold text-slate-700">Goal:</strong> ${workoutData.goal}</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                <div class="bg-white p-3 rounded-md border"><strong>Duration:</strong> ${workoutData.duration}</div>
                                <div class="bg-white p-3 rounded-md border"><strong>Intensity:</strong> ${workoutData.intensity}</div>
                            </div>
                            <h4 class="font-semibold mt-4 mb-2">Protocols:</h4>
                            <ul class="list-disc list-inside space-y-1 text-slate-600">
                                ${workoutData.protocols.map(p => `<li>${p}</li>`).join('')}
                            </ul>
                        `;
                    }
                }

                const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                const completedWorkouts = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
                const isCompletedToday = completedWorkouts.includes(todayStr);

                let buttonHtml = '';
                if (workoutKey !== 'rest') {
                    buttonHtml = `
                        <div class="mt-6 text-center">
                            <button id="mark-complete-btn" class="py-2 px-6 rounded-lg text-white font-semibold transition ${isCompletedToday ? 'bg-gray-400 cursor-not-allowed' : 'bg-teal-600 hover:bg-teal-700'}" ${isCompletedToday ? 'disabled' : ''}>
                                ${isCompletedToday ? '✓ Completed' : 'Mark as Complete'}
                            </button>
                            <p id="completion-message" class="text-green-600 mt-2 h-5"></p>
                        </div>
                    `;
                }

                container.innerHTML = workoutHtml + buttonHtml;

                if (workoutKey !== 'rest' && !isCompletedToday) {
                    document.getElementById('mark-complete-btn').addEventListener('click', () => {
                        const currentCompleted = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
                        if (!currentCompleted.includes(todayStr)) {
                            currentCompleted.push(todayStr);
                            localStorage.setItem('completedWorkouts', JSON.stringify(currentCompleted));
                        }
                        
                        const btn = document.getElementById('mark-complete-btn');
                        btn.disabled = true;
                        btn.innerHTML = '✓ Completed';
                        btn.classList.add('bg-gray-400', 'cursor-not-allowed');
                        btn.classList.remove('bg-teal-600', 'hover:bg-teal-700');

                        const msg = document.getElementById('completion-message');
                        msg.textContent = 'Great job! Workout logged.';
                        setTimeout(() => { msg.textContent = '' }, 3000);
                        
                        renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
                    });
                }
            }

            function renderPrinciples() {
                const container = document.getElementById('principles-container');
                container.innerHTML = appData.principles.map(p => `
                    <details class="bg-slate-50 rounded-lg border border-slate-200 group">
                        <summary class="p-4 font-semibold cursor-pointer list-none flex justify-between items-center">
                            <span>${p.title}</span>
                            <span class="text-teal-500 transform transition-transform duration-300 group-open:rotate-180">&#9660;</span>
                        </summary>
                        <div class="p-4 border-t border-slate-200 text-slate-600">
                            <p>${p.content}</p>
                        </div>
                    </details>
                `).join('');
            }
            
            function renderCardioAndProtocols() {
                const cardioContainer = document.getElementById('cardio-container');
                const protocolsContainer = document.getElementById('protocols-container');
                
                cardioContainer.innerHTML = appData.cardioInfo.map(c => `
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <h4 class="font-bold text-lg mb-2">${c.title}</h4>
                        <p class="text-slate-600">${c.content}</p>
                    </div>
                `).join('');

                protocolsContainer.innerHTML = appData.protocols.map(p => `
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <h4 class="font-bold text-lg mb-2">${p.title}</h4>
                        <p class="text-slate-600 mb-3">${p.content}</p>
                        <ul class="space-y-2 text-sm text-slate-700">
                            ${p.steps.map(s => `<li class="flex items-start"><span class="text-teal-500 mr-2 mt-1">&#10003;</span><span>${s}</span></li>`).join('')}
                        </ul>
                    </div>
                `).join('');
            }

            function renderHeartRateChart() {
                const ctx = document.getElementById('cardioChart').getContext('2d');
                const maxHR = 186;
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['LISS (Zone 2)', 'HIIT (Work Interval)'],
                        datasets: [{
                            label: 'Target BPM',
                            data: [121, 167], 
                            backgroundColor: ['#2dd4bf', '#f43f5e'],
                            borderColor: ['#14b8a6', '#e11d48'],
                            borderWidth: 1
                        },
                        {
                            label: 'Max Heart Rate',
                            data: [maxHR, maxHR],
                            backgroundColor: 'rgba(203, 213, 225, 0.5)',
                            borderColor: '#94a3b8',
                            borderWidth: 1,
                            type: 'line',
                            pointRadius: 0,
                            borderDash: [5, 5]
                        }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: { display: true, text: 'Target Beats Per Minute (BPM)' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) { label += ': '; }
                                        if (context.parsed.y !== null) { label += context.parsed.y + ' BPM'; }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: { beginAtZero: true, max: maxHR + 14, title: { display: true, text: 'Heart Rate (BPM)' } }
                        }
                    }
                });
            }

            function renderCalendar(year, month) {
                const calendarContainer = document.getElementById('calendar-container');
                const completedWorkouts = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
                const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                let html = `
                    <div class="flex justify-between items-center mb-4">
                        <button id="prev-month" class="p-2 rounded-full hover:bg-slate-200 w-10 h-10 flex items-center justify-center transition">&#9664;</button>
                        <h3 class="text-xl font-bold text-slate-700">${monthNames[month]} ${year}</h3>
                        <button id="next-month" class="p-2 rounded-full hover:bg-slate-200 w-10 h-10 flex items-center justify-center transition">&#9654;</button>
                    </div>
                    <div class="grid grid-cols-7 gap-1 md:gap-2 text-center font-semibold text-slate-600 text-sm">
                        ${daysOfWeek.map(day => `<div>${day}</div>`).join('')}
                    </div>
                    <div class="grid grid-cols-7 gap-1 md:gap-2 mt-2 text-center text-sm">
                `;

                for (let i = 0; i < firstDay; i++) { html += `<div></div>`; }

                const today = new Date();
                const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const isCompleted = completedWorkouts.includes(dateStr);
                    const isToday = dateStr === todayStr;

                    let cellClasses = 'p-2 rounded-lg flex flex-col justify-center items-center h-12 md:h-16 transition';
                    if (isToday) {
                        cellClasses += ' bg-teal-100 ring-2 ring-teal-500';
                    } else if (isCompleted) {
                        cellClasses += ' bg-green-100';
                    } else {
                        cellClasses += ' bg-slate-100'
                    }

                    html += `<div class="${cellClasses}">
                                <span>${day}</span>
                                ${isCompleted ? '<span class="text-green-600 text-xl mt-1">&#10004;</span>' : ''}
                             </div>`;
                }

                html += `</div>`;
                calendarContainer.innerHTML = html;

                document.getElementById('prev-month').addEventListener('click', () => {
                    calendarDate.setMonth(calendarDate.getMonth() - 1);
                    renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
                });
                document.getElementById('next-month').addEventListener('click', () => {
                    calendarDate.setMonth(calendarDate.getMonth() + 1);
                    renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
                });
            }


            // Initial Render
            switchView('dashboard');
            phaseButtons[0].classList.add('active');
            renderTodayWorkout();
            renderPhaseWorkouts();
            renderPrinciples();
            renderCardioAndProtocols();
            renderHeartRateChart();
            renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
        });
    </script>
</body>
</html>
