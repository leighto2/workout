<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3-Focus Training Program</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        .view { display: none; }
        .view.active { display: block; }
        .nav-btn { transition: all 0.3s ease; }
        .nav-btn.active {
            background-color: #0d9488; /* teal-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .table-cell {
            padding: 0.75rem;
            vertical-align: top;
            border-bottom: 1px solid #e5e7eb;
        }
        .workout-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #cbd5e1;
        }
        .exercise-item {
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid #14b8a6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="app" class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900">3-Focus Training Program</h1>
            <p class="text-slate-600 mt-2 text-lg">Upper Body ‚Ä¢ Core & Lower Back ‚Ä¢ Lower Body - Each Focus Twice Weekly</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8 sticky top-4 bg-slate-50/80 backdrop-blur-sm py-2 z-10">
            <button data-view="dashboard" class="nav-btn active text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Today's Workout</button>
            <button data-view="program" class="nav-btn text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Weekly Schedule</button>
            <button data-view="exercises" class="nav-btn text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Exercise Guide</button>
            <button data-view="progress" class="nav-btn text-sm md:text-base font-semibold py-2 px-4 rounded-full bg-white shadow-sm hover:bg-teal-500 hover:text-white">Progress</button>
        </nav>

        <main>
            <!-- Dashboard View -->
            <div id="dashboard" class="view active">
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Today's Training</h2>
                    <p class="text-slate-600 mb-6">Your customized workout for today. Each session includes a 20-minute treadmill warm-up followed by targeted strength training.</p>
                    <div id="today-workout-container" class="bg-slate-50 p-6 rounded-lg border border-slate-200"></div>
                </div>
            </div>

            <!-- Program View -->
            <div id="program" class="view">
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Weekly Training Schedule</h2>
                    <p class="text-slate-600 mb-6">A comprehensive 6-day program with three distinct focuses. Each focus area is trained twice weekly for optimal development and recovery.</p>
                    <div id="weekly-schedule" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                </div>
            </div>

            <!-- Exercise Guide View -->
            <div id="exercises" class="view">
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Exercise Guide & Tips</h2>
                    <p class="text-slate-600 mb-6">Key form cues and exercise variations to ensure safe, effective training and continuous progression.</p>
                    <div id="exercise-guide-container" class="space-y-4"></div>
                </div>
            </div>

            <!-- Progress View -->
            <div id="progress" class="view">
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <h2 class="text-2xl font-bold mb-1 text-teal-600">Your Progress Calendar</h2>
                    <p class="text-slate-600 mb-6">Track your completed workouts and maintain consistency with your training schedule.</p>
                    <div id="calendar-container"></div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const appData = {
                workouts: {
                    monday: {
                        name: 'Monday: Upper Body (Session 1)',
                        type: 'Upper Body',
                        warmup: {
                            name: 'Treadmill Warm-up',
                            duration: '20 minutes',
                            details: 'Moderate pace (3.0-3.5 mph) with slight incline'
                        },
                        strength: {
                            name: 'Upper Body Strength Training',
                            duration: '45-50 minutes',
                            exercises: [
                                { ex: 'Barbell Bench Press', sets: '4', reps: '8-10', notes: 'Focus on controlled tempo' },
                                { ex: 'Bent-Over Barbell Rows', sets: '4', reps: '8-10', notes: 'Keep back straight, pull to sternum' },
                                { ex: 'Overhead Press', sets: '3', reps: '10-12', notes: 'Standing or seated' },
                                { ex: 'Pull-ups/Lat Pulldowns', sets: '3', reps: '8-12', notes: 'Full range of motion' },
                                { ex: 'Dumbbell Incline Press', sets: '3', reps: '10-12', notes: '30-45 degree incline' },
                                { ex: 'Cable Rows', sets: '3', reps: '10-12', notes: 'Squeeze shoulder blades' },
                                { ex: 'Tricep Dips', sets: '3', reps: '10-15', notes: 'Full range of motion' },
                                { ex: 'Barbell Curls', sets: '3', reps: '10-12', notes: 'Controlled movement' }
                            ]
                        }
                    },
                    tuesday: {
                        name: 'Tuesday: Core & Lower Back (Session 1)',
                        type: 'Core & Lower Back',
                        warmup: {
                            name: 'Treadmill Warm-up',
                            duration: '20 minutes',
                            details: 'Moderate pace (3.0-3.5 mph) with slight incline'
                        },
                        strength: {
                            name: 'Core & Lower Back Training',
                            duration: '45-50 minutes',
                            exercises: [
                                { ex: 'Deadlifts', sets: '4', reps: '6-8', notes: 'Focus on form, hip hinge pattern' },
                                { ex: 'Plank', sets: '4', reps: '45-60 seconds', notes: 'Maintain straight line' },
                                { ex: 'Russian Twists', sets: '4', reps: '20 each side', notes: 'Feet off ground, control rotation' },
                                { ex: 'Hyperextensions', sets: '3', reps: '12-15', notes: 'Controlled movement, squeeze glutes' },
                                { ex: 'Dead Bug', sets: '3', reps: '10 each side', notes: 'Keep lower back flat' },
                                { ex: 'Good Mornings', sets: '3', reps: '12-15', notes: 'Light weight, hip hinge' },
                                { ex: 'Hanging Leg Raises', sets: '3', reps: '8-12', notes: 'Control the swing' },
                                { ex: 'Bird Dog', sets: '3', reps: '10 each side', notes: 'Opposite arm/leg' },
                                { ex: 'Side Plank', sets: '3', reps: '30-45 sec each', notes: 'Hold position, breathe normally' }
                            ]
                        }
                    },
                    wednesday: {
                        name: 'Wednesday: Lower Body (Session 1)',
                        type: 'Lower Body',
                        warmup: {
                            name: 'Treadmill Warm-up',
                            duration: '20 minutes',
                            details: 'Moderate pace (3.0-3.5 mph) with slight incline'
                        },
                        strength: {
                            name: 'Lower Body Strength Training',
                            duration: '45-50 minutes',
                            exercises: [
                                { ex: 'Barbell Squats', sets: '4', reps: '8-10', notes: 'Deep squat, knees track over toes' },
                                { ex: 'Romanian Deadlifts', sets: '4', reps: '8-10', notes: 'Hip hinge movement, feel hamstring stretch' },
                                { ex: 'Bulgarian Split Squats', sets: '3', reps: '10-12 each leg', notes: 'Rear foot elevated' },
                                { ex: 'Hip Thrusts', sets: '3', reps: '12-15', notes: 'Squeeze glutes at top' },
                                { ex: 'Walking Lunges', sets: '3', reps: '12 each leg', notes: 'Step forward, sink down' },
                                { ex: 'Leg Curls', sets: '3', reps: '12-15', notes: 'Lying or seated' },
                                { ex: 'Calf Raises', sets: '3', reps: '15-20', notes: 'Full range of motion' },
                                { ex: 'Glute Bridges', sets: '3', reps: '15-20', notes: 'Two feet on ground' }
                            ]
                        }
                    },
                    thursday: {
                        name: 'Thursday: Upper Body (Session 2)',
                        type: 'Upper Body',
                        warmup: {
                            name: 'Treadmill Warm-up',
                            duration: '20 minutes',
                            details: 'Moderate pace (3.0-3.5 mph) with slight incline'
                        },
                        strength: {
                            name: 'Upper Body Strength Training',
                            duration: '45-50 minutes',
                            exercises: [
                                { ex: 'Incline Barbell Press', sets: '4', reps: '8-10', notes: 'Different angle from Monday' },
                                { ex: 'T-Bar Rows', sets: '4', reps: '8-10', notes: 'Or chest-supported rows' },
                                { ex: 'Dumbbell Shoulder Press', sets: '3', reps: '10-12', notes: 'Seated or standing' },
                                { ex: 'Wide-Grip Pull-ups/Pulldowns', sets: '3', reps: '8-12', notes: 'Different grip from Monday' },
                                { ex: 'Cable Flyes', sets: '3', reps: '10-12', notes: 'Constant tension' },
                                { ex: 'Face Pulls', sets: '3', reps: '12-15', notes: 'Rear delt focus' },
                                { ex: 'Overhead Tricep Extension', sets: '3', reps: '10-15', notes: 'Seated or standing' },
                                { ex: 'Hammer Curls', sets: '3', reps: '10-12', notes: 'Neutral grip' }
                            ]
                        }
                    },
                    friday: {
                        name: 'Friday: Core & Lower Back (Session 2)',
                        type: 'Core & Lower Back',
                        warmup: {
                            name: 'Treadmill Warm-up',
                            duration: '20 minutes',
                            details: 'Moderate pace (3.0-3.5 mph) with slight incline'
                        },
                        strength: {
                            name: 'Core & Lower Back Training',
                            duration: '45-50 minutes',
                            exercises: [
                                { ex: 'Sumo Deadlifts', sets: '4', reps: '6-8', notes: 'Wide stance, different from Tuesday' },
                                { ex: 'Ab Wheel Rollouts', sets: '4', reps: '8-12', notes: 'Or plank variations if no wheel' },
                                { ex: 'Bicycle Crunches', sets: '4', reps: '20 each side', notes: 'Controlled movement' },
                                { ex: 'Stiff Leg Deadlifts', sets: '3', reps: '12-15', notes: 'Light weight, stretch focus' },
                                { ex: 'Mountain Climbers', sets: '3', reps: '20 total', notes: 'Fast tempo, core engagement' },
                                { ex: 'Superman Holds', sets: '3', reps: '15 reps', notes: '3-second holds' },
                                { ex: 'Cable Crunches', sets: '3', reps: '15-20', notes: 'High cable position' },
                                { ex: 'Reverse Plank', sets: '3', reps: '30-45 seconds', notes: 'Face up, straight body' },
                                { ex: 'Pallof Press', sets: '3', reps: '10 each side', notes: 'Anti-rotation core work' }
                            ]
                        }
                    },
                    saturday: {
                        name: 'Saturday: Lower Body (Session 2)',
                        type: 'Lower Body',
                        warmup: {
                            name: 'Treadmill Warm-up',
                            duration: '20 minutes',
                            details: 'Moderate pace (3.0-3.5 mph) with slight incline'
                        },
                        strength: {
                            name: 'Lower Body Strength Training',
                            duration: '45-50 minutes',
                            exercises: [
                                { ex: 'Front Squats', sets: '4', reps: '8-10', notes: 'Different squat variation' },
                                { ex: 'Single Leg RDLs', sets: '4', reps: '8-10 each leg', notes: 'Unilateral work' },
                                { ex: 'Step-ups', sets: '3', reps: '10-12 each leg', notes: 'Use bench or box' },
                                { ex: 'Single Leg Hip Thrusts', sets: '3', reps: '10-12 each', notes: 'Unilateral glute work' },
                                { ex: 'Reverse Lunges', sets: '3', reps: '12 each leg', notes: 'Step back, control descent' },
                                { ex: 'Nordic Curls', sets: '3', reps: '5-8', notes: 'Eccentric hamstring work' },
                                { ex: 'Seated Calf Raises', sets: '3', reps: '15-20', notes: 'Different angle from Wednesday' },
                                { ex: 'Wall Sit', sets: '3', reps: '45-60 seconds', notes: 'Isometric quad work' }
                            ]
                        }
                    },
                    sunday: {
                        name: 'Sunday: Rest Day',
                        type: 'Recovery',
                        activity: 'Complete rest or light walk/gentle yoga if desired. Focus on recovery, hydration, and preparation for the upcoming week.'
                    }
                },
                weeklySchedule: [
                    'sunday', // Sunday
                    'monday', // Monday
                    'tuesday', // Tuesday
                    'wednesday', // Wednesday
                    'thursday', // Thursday
                    'friday', // Friday
                    'saturday' // Saturday
                ],
                exerciseGuide: [
                    {
                        category: 'Upper Body Compound',
                        exercises: [
                            { name: 'Barbell Bench Press', tips: 'Retract shoulder blades, feet firmly planted, control the bar to chest, press up explosively' },
                            { name: 'Bent-Over Barbell Rows', tips: 'Hip hinge position, pull bar to lower sternum, squeeze shoulder blades together' },
                            { name: 'Overhead Press', tips: 'Core tight, press straight up, full lockout overhead, control the descent' }
                        ]
                    },
                    {
                        category: 'Lower Body Compound',
                        exercises: [
                            { name: 'Barbell Squats', tips: 'Feet shoulder-width apart, break at hips and knees, thighs parallel, drive through heels' },
                            { name: 'Romanian Deadlifts', tips: 'Hip hinge movement, keep bar close to body, feel stretch in hamstrings' },
                            { name: 'Bulgarian Split Squats', tips: 'Most weight on front leg, drop straight down, drive up through front heel' }
                        ]
                    },
                    {
                        category: 'Core & Lower Back',
                        exercises: [
                            { name: 'Deadlifts', tips: 'Keep bar close to body, drive through heels, chest up, shoulders back' },
                            { name: 'Plank', tips: 'Straight line from head to heels, engage core, breathe normally' },
                            { name: 'Dead Bug', tips: 'Press lower back into floor, move opposite arm/leg slowly' },
                            { name: 'Good Mornings', tips: 'Light weight, hip hinge movement, keep chest up' },
                            { name: 'Bird Dog', tips: 'Neutral spine, extend opposite arm/leg, hold for 2-3 seconds' }
                        ]
                    }
                ]
            };
            
            let currentView = 'dashboard';
            let calendarDate = new Date();

            const views = {
                dashboard: document.getElementById('dashboard'),
                program: document.getElementById('program'),
                exercises: document.getElementById('exercises'),
                progress: document.getElementById('progress')
            };

            const navButtons = document.querySelectorAll('.nav-btn');

            function switchView(viewName) {
                currentView = viewName;
                navButtons.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.view === viewName);
                });
                Object.values(views).forEach(view => {
                    view.classList.toggle('active', view.id === viewName);
                });
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            navButtons.forEach(btn => {
                btn.addEventListener('click', () => switchView(btn.dataset.view));
            });

            function createExerciseList(exercises, showNotes = true) {
                return exercises.map(ex => `
                    <div class="exercise-item">
                        <div>
                            <div class="font-semibold text-slate-800">${ex.ex}</div>
                            ${showNotes && ex.notes ? `<div class="text-sm text-slate-600 mt-1">${ex.notes}</div>` : ''}
                        </div>
                        <div class="text-right">
                            <div class="font-medium text-teal-700">${ex.sets} √ó ${ex.reps}</div>
                        </div>
                    </div>
                `).join('');
            }

            function createWorkoutHTML(workout) {
                let html = `<h3 class="font-bold text-xl mb-4">${workout.name}</h3>`;
                
                if (workout.warmup) {
                    html += `
                        <div class="workout-section">
                            <h4 class="font-bold text-lg mb-3 text-teal-700">üèÉ ${workout.warmup.name}</h4>
                            <div class="bg-white p-4 rounded-lg border border-slate-200">
                                <div class="flex justify-between items-center">
                                    <span class="font-medium">${workout.warmup.details}</span>
                                    <span class="text-teal-600 font-semibold">${workout.warmup.duration}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }

                if (workout.strength) {
                    html += `
                        <div class="workout-section">
                            <h4 class="font-bold text-lg mb-3 text-teal-700">üí™ ${workout.strength.name}</h4>
                            <div class="mb-2 text-sm text-slate-600">Duration: ${workout.strength.duration}</div>
                            ${createExerciseList(workout.strength.exercises)}
                        </div>
                    `;
                }

                if (workout.type === 'Recovery') {
                    html += `
                        <div class="workout-section">
                            <h4 class="font-bold text-lg mb-3 text-teal-700">üòå Recovery Day</h4>
                            <div class="bg-white p-4 rounded-lg border border-slate-200">
                                <p class="text-slate-700">${workout.activity}</p>
                            </div>
                        </div>
                    `;
                }

                return html;
            }

            function renderTodayWorkout() {
                const today = new Date();
                const dayKey = appData.weeklySchedule[today.getDay()];
                const workout = appData.workouts[dayKey];
                const container = document.getElementById('today-workout-container');

                const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                const completedWorkouts = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
                const isCompletedToday = completedWorkouts.includes(todayStr);

                let workoutHtml = createWorkoutHTML(workout);

                let buttonHtml = '';
                if (workout.type !== 'Recovery') {
                    buttonHtml = `
                        <div class="mt-6 text-center">
                            <button id="mark-complete-btn" class="py-3 px-8 rounded-lg text-white font-semibold transition ${isCompletedToday ? 'bg-gray-400 cursor-not-allowed' : 'bg-teal-600 hover:bg-teal-700'}" ${isCompletedToday ? 'disabled' : ''}>
                                ${isCompletedToday ? '‚úÖ Completed Today' : 'Mark as Complete'}
                            </button>
                            <p id="completion-message" class="text-green-600 mt-2 h-5"></p>
                        </div>
                    `;
                }

                container.innerHTML = workoutHtml + buttonHtml;

                if (workout.type !== 'Recovery' && !isCompletedToday) {
                    document.getElementById('mark-complete-btn').addEventListener('click', () => {
                        const currentCompleted = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
                        if (!currentCompleted.includes(todayStr)) {
                            currentCompleted.push(todayStr);
                            localStorage.setItem('completedWorkouts', JSON.stringify(currentCompleted));
                        }
                        
                        const btn = document.getElementById('mark-complete-btn');
                        btn.disabled = true;
                        btn.innerHTML = '‚úÖ Completed Today';
                        btn.classList.add('bg-gray-400', 'cursor-not-allowed');
                        btn.classList.remove('bg-teal-600', 'hover:bg-teal-700');

                        const msg = document.getElementById('completion-message');
                        msg.textContent = 'Excellent work! Workout logged successfully.';
                        setTimeout(() => { msg.textContent = '' }, 3000);
                        
                        renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
                    });
                }
            }

            function renderWeeklySchedule() {
                const container = document.getElementById('weekly-schedule');
                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                
                container.innerHTML = days.map((day, index) => {
                    const dayKey = appData.weeklySchedule[index];
                    const workout = appData.workouts[dayKey];
                    const today = new Date().getDay();
                    const isToday = index === today;
                    
                    return `
                        <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 ${isToday ? 'ring-2 ring-teal-500' : ''}">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-lg text-slate-800">${day}</h3>
                                ${isToday ? '<span class="bg-teal-100 text-teal-800 px-2 py-1 rounded-full text-xs font-semibold">TODAY</span>' : ''}
                            </div>
                            <div class="mb-3">
                                <span class="inline-block px-3 py-1 rounded-full text-xs font-semibold ${
                                    workout.type === 'Upper Body' ? 'bg-blue-100 text-blue-800' :
                                    workout.type === 'Lower Body' ? 'bg-green-100 text-green-800' :
                                    workout.type === 'Core & Lower Back' ? 'bg-purple-100 text-purple-800' :
                                    'bg-gray-100 text-gray-800'
                                }">${workout.type}</span>
                            </div>
                            <h4 class="font-semibold mb-2">${workout.name}</h4>
                            ${workout.warmup ? `<p class="text-sm text-slate-600 mb-1">‚Ä¢ ${workout.warmup.duration} warm-up</p>` : ''}
                            ${workout.strength ? `<p class="text-sm text-slate-600 mb-1">‚Ä¢ ${workout.strength.duration} strength training</p>` : ''}
                            ${workout.type === 'Recovery' ? `<p class="text-sm text-slate-600">${workout.activity}</p>` : ''}
                        </div>
                    `;
                }).join('');
            }

            function renderExerciseGuide() {
                const container = document.getElementById('exercise-guide-container');
                container.innerHTML = appData.exerciseGuide.map(category => `
                    <details class="bg-slate-50 rounded-lg border border-slate-200 group">
                        <summary class="p-4 font-semibold cursor-pointer list-none flex justify-between items-center">
                            <span>${category.category}</span>
                            <span class="text-teal-500 transform transition-transform duration-300 group-open:rotate-180">‚ñº</span>
                        </summary>
                        <div class="p-4 border-t border-slate-200">
                            ${category.exercises.map(ex => `
                                <div class="mb-4 last:mb-0">
                                    <h4 class="font-semibold text-slate-800 mb-2">${ex.name}</h4>
                                    <p class="text-slate-600 text-sm">${ex.tips}</p>
                                </div>
                            `).join('')}
                        </div>
                    </details>
                `).join('');
            }

            function renderCalendar(year, month) {
                const calendarContainer = document.getElementById('calendar-container');
                const completedWorkouts = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
                const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                let html = `
                    <div class="flex justify-between items-center mb-6">
                        <button id="prev-month" class="p-3 rounded-full hover:bg-slate-200 w-12 h-12 flex items-center justify-center transition font-bold text-slate-600">‚Äπ</button>
                        <h3 class="text-2xl font-bold text-slate-700">${monthNames[month]} ${year}</h3>
                        <button id="next-month" class="p-3 rounded-full hover:bg-slate-200 w-12 h-12 flex items-center justify-center transition font-bold text-slate-600">‚Ä∫</button>
                    </div>
                    <div class="grid grid-cols-7 gap-2 text-center font-semibold text-slate-600 text-sm mb-2">
                        ${daysOfWeek.map(day => `<div class="p-2">${day}</div>`).join('')}
                    </div>
                    <div class="grid grid-cols-7 gap-2 text-center text-sm">
                `;

                for (let i = 0; i < firstDay; i++) { html += `<div class="h-16"></div>`; }

                const today = new Date();
                const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const isCompleted = completedWorkouts.includes(dateStr);
                    const isToday = dateStr === todayStr;
                    const dayOfWeek = new Date(year, month, day).getDay();
                    const workoutType = appData.workouts[appData.weeklySchedule[dayOfWeek]].type;

                    let cellClasses = 'p-2 rounded-lg flex flex-col justify-center items-center h-16 transition cursor-pointer border-2';
                    let workoutIndicator = '';
                    
                    if (isToday) {
                        cellClasses += ' bg-teal-100 border-teal-500 ring-2 ring-teal-300';
                    } else if (isCompleted) {
                        cellClasses += ' bg-green-100 border-green-300';
                    } else {
                        cellClasses += ' bg-slate-50 border-slate-200 hover:bg-slate-100';
                    }

                    if (workoutType === 'Upper Body') workoutIndicator = 'üí™';
                    else if (workoutType === 'Lower Body') workoutIndicator = 'ü¶µ';
                    else if (workoutType === 'Core & Lower Back') workoutIndicator = 'üéØ';
                    else workoutIndicator = 'üòå';

                    html += `<div class="${cellClasses}">
                                <span class="font-medium">${day}</span>
                                <span class="text-xs mt-1">${workoutIndicator}</span>
                                ${isCompleted ? '<span class="text-green-600 text-lg">‚úì</span>' : ''}
                             </div>`;
                }

                html += `</div>`;
                
                html += `
                    <div class="mt-6 flex flex-wrap justify-center gap-4 text-sm">
                        <div class="flex items-center gap-2"><span>üí™</span><span>Upper Body</span></div>
                        <div class="flex items-center gap-2"><span>ü¶µ</span><span>Lower Body</span></div>
                        <div class="flex items-center gap-2"><span>üéØ</span><span>Core & Lower Back</span></div>
                        <div class="flex items-center gap-2"><span>üòå</span><span>Rest Day</span></div>
                    </div>
                `;

                calendarContainer.innerHTML = html;

                document.getElementById('prev-month').addEventListener('click', () => {
                    calendarDate.setMonth(calendarDate.getMonth() - 1);
                    renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
                });
                document.getElementById('next-month').addEventListener('click', () => {
                    calendarDate.setMonth(calendarDate.getMonth() + 1);
                    renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
                });
            }

            // Initial Render
            switchView('dashboard');
            renderTodayWorkout();
            renderWeeklySchedule();
            renderExerciseGuide();
            renderCalendar(calendarDate.getFullYear(), calendarDate.getMonth());
        });
    </script>
</body>
</html>
